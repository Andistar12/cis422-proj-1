{% extends "parent_layout.html" %}
{% set active_page = "tsp" %}
{% block content %}

<div class="container-fluid text-center" style="height:80%;">

    <br>

    <div class="row h-100">
        <div class="col-sm-4" style="height: auto;">
            <div class="row justify-content-center">
                <div class="btn-toolbar" style="display: inline">
                    <button type="button" class="btn-toggle-text btn btn-outline-primary mb-3" title="Toggle marker visibility" data-toggle="collapse" data-target="#markerCollapse" aria-expanded="false" aria-controls="markerCollapse"><span>Show Markers</span><div>Hide Markers</div></button>
                    &nbsp;
                    <button type="button" class="btn btn-outline-primary mb-3" title="Clear all existing markers" onclick="clearMarkers()">Clear Markers</button>
                    &nbsp;
                    <button type="button" class="btn btn-outline-primary mb-3" title="Compute the optimal path" onclick="computePath()"><a id="compute_a" href="#google-map">Compute Path</a></button>
                    &nbsp;
                    <button type="button" class="btn btn-outline-primary mb-3" title="Import markers from a file" onclick="importMarkers()">Import Markers</button>
                    &nbsp;
                    <input type="file" id="file-input" style="display: none">
                </div>
                <!-- Button trigger modal -->
                <button type="button" class="btn mb-3" title="Help" data-toggle="modal" data-target="#helpModal">
                    <i class="fa fa-question" aria-hidden="true"></i>
                </button>

                <!-- Modal -->
                <div class="modal fade" id="helpModal" tabindex="-1" role="dialog" aria-labelledby="helpModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Help</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <h5>How to use the Route Finder</h5>
                                    <p>...<p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br>
            <div class="row justify-content-center">
                <div class="collapse show" id="markerCollapse"><div class="list-group" id="marker-list"></div></div>
            </div>
            <br>
            <div class="row-center mb-3">
                <label for="stop-time">Add time at each stop: 0 minutes</label>
                <input type="range" class="custom-range" value="0" min="0" max="120" step="1" id="stop-time">
                <div class="text-center col-12">Your route: <span id="path-list">Please press "Compute Path" when ready.</span></div>
                <div class="text-center col-12">Drive Time: <span id="drive-time"></span></div>
                <div class="text-center col-12">Total Time: <span id="total-time"></span></div>
            </div>
            <br>
        </div>

        <div class="col h-100">
            <div class="input-group mb-3">
                <div class="search">
                    <input type="text" class="searchTerm" placeholder="Enter Location" id="txf-search-location" aria-label="Search location" aria-describedby="btn-search-location">
                    <button type="submit" class="searchButton" id="btn-search-location" onclick="searchLocation()">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div>

            <div class="h-100 border" id="google-map"></div>
            <div id="warnings-panel" hidden></div>
            <script>
                var scriptTag = document.createElement("script");
                scriptTag.src = "https://maps.googleapis.com/maps/api/js?key={{ API_KEY }}&callback=initMap&v=weekly"
                window.__nope_apiKey = "{{ API_KEY }}";
                scriptTag.async = true;
                document.head.appendChild(scriptTag);
            </script>
        </div>
    </div>
</div>

{% endblock %}
